generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model LogTransaccional {
  id_log      Int      @id @default(autoincrement())
  fecha       DateTime @db.Date
  descripcion String   @db.VarChar(255)
  estado      String   @db.VarChar(20)
}

model curso {
  id_curso           Int           @id @default(autoincrement())
  cupos              Int
  fecha_inicio       DateTime      @db.Date
  fecha_fin          DateTime?     @db.Date
  estado             String        @db.VarChar(1)
  Materia_id_materia Int?
  materia            materia?      @relation(fields: [Materia_id_materia], references: [id_materia], onDelete: NoAction, onUpdate: NoAction, map: "curso_ibfk_1")
  inscripcion        inscripcion[]

  @@index([Materia_id_materia], map: "Materia_id_materia")
}

model inscripcion {
  id_inscripcion     Int      @default(autoincrement())
  nota_primer_corte  Decimal  @db.Decimal(3, 0)
  nota_segundo_corte Decimal  @db.Decimal(3, 0)
  nota_habilitacion  Decimal? @db.Decimal(3, 0)
  Usuario_id_usuario Int
  Curso_id_curso     Int
  curso              curso    @relation(fields: [Curso_id_curso], references: [id_curso], onDelete: NoAction, onUpdate: NoAction, map: "fk_Inscripcion_Curso1")
  usuario            usuario  @relation(fields: [Usuario_id_usuario], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction, map: "inscripcion_ibfk_1")

  @@id([id_inscripcion, Usuario_id_usuario, Curso_id_curso])
  @@index([Usuario_id_usuario], map: "Usuario_id_usuario")
  @@index([Curso_id_curso], map: "fk_Inscripcion_Curso1")
}

model materia {
  id_materia     Int     @id @default(autoincrement())
  nombre_materia String  @db.VarChar(45)
  creditos       Int
  codigo_materia Int
  estado         String  @db.VarChar(1)
  es_habilitable String  @db.VarChar(2)
  curso          curso[]
}

model usuario {
  id_usuario       Int           @id @default(autoincrement())
  numero_documento String        @db.VarChar(30)
  nombre_usuario   String        @db.VarChar(45)
  apellido_usuario String        @db.VarChar(45)
  tipo_documento   String        @db.VarChar(2)
  codigo           String        @db.VarChar(10)
  estado           String        @db.VarChar(1)
  inscripcion      inscripcion[]
}
